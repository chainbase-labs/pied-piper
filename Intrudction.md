

# foundry tools

- 查看合约基本情况
`cast interface 0xa43fe16908251ee70ef74718545e4fe6c5ccec9f`



- [tx](https://etherscan.io/tx/0x73dbdf1aba84463aec53d85f79ca7d1ec95ed32cf11ece8f679fd0271dec5030/)

```shell
USER=0x13a716Dd20763000CbF87f999548c3d67F936D35
ROUTER=0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD

# check status before tx
cast balance $USER | cast --from-wei  //0.193162082503125468

# anvil mock  tx
anvil --fork-url https://ethereum-mainnet.s.chainbase.online/v1/demo  --fork-block-number 18445890 //18445890 is previous block for this tx

cast rpc anvil_impersonateAccount $USER

cast send $ROUTER --unlocked --from $USER 0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000653c7bf30000000000000000000000000000000000000000000000000000000000000002090c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000547a9c189cb7587083746db00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000006982508145454ce325ddbe47a25d4ec3d2311933000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000de0b6b3a7640000


cast balance $USER | cast --from-wei  //1.191114644094408832
```


## use tenderly analyse tx
https://dashboard.tenderly.co/tx/mainnet/0x73dbdf1aba84463aec53d85f79ca7d1ec95ed32cf11ece8f679fd0271dec5030?trace=0.0.6.7.0

- calldata explained 
```shell
Function: execute(bytes commands,bytes[] inputs,uint256 deadline)

MethodID: 0x3593564c
[0]:  0000000000000000000000000000000000000000000000000000000000000060
[1]:  00000000000000000000000000000000000000000000000000000000000000a0
[2]:  00000000000000000000000000000000000000000000000000000000653c7bf3
[3]:  0000000000000000000000000000000000000000000000000000000000000002
[4]:  090c000000000000000000000000000000000000000000000000000000000000
[5]:  0000000000000000000000000000000000000000000000000000000000000002
[6]:  0000000000000000000000000000000000000000000000000000000000000040
[7]:  0000000000000000000000000000000000000000000000000000000000000160

[8]:  0000000000000000000000000000000000000000000000000000000000000100
[9]:  0000000000000000000000000000000000000000000000000000000000000002
[10]: 0000000000000000000000000000000000000000000000000de0b6b3a7640000
[11]: 00000000000000000000000000000000000000000547a9c189cb7587083746db

[12]: 00000000000000000000000000000000000000000000000000000000000000a0
[13]: 0000000000000000000000000000000000000000000000000000000000000001
[14]: 0000000000000000000000000000000000000000000000000000000000000002
[15]: 0000000000000000000000006982508145454ce325ddbe47a25d4ec3d2311933
[16]: 000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2
[17]: 0000000000000000000000000000000000000000000000000000000000000040
[18]: 0000000000000000000000000000000000000000000000000000000000000001
[19]: 0000000000000000000000000000000000000000000000000de0b6b3a7640000
```
- 动态数据编码


- https://docs.soliditylang.org/en/v0.8.11/abi-spec.html


- https://docs.uniswap.org/contracts/universal-router/technical-reference
- 0x09	V2_SWAP_EXACT_OUT
- 0x0c	UNWRAP_WETH


